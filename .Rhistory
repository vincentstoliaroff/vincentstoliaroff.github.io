date,
IndexTradingSymbol,
TradingSymbol,
A,
Kt,
ffit,
qit,
ci,
pi0,
qi0,
Fit)%>%
dplyr::group_by(IndexTradingSymbol,
TradingSymbol,
A,
Kt,
ffit,
qit,
ci,
pi0,
qi0,
Fit)%>%
dplyr::summarize(datum=min(datum),
date=min(date))%>%
dplyr::ungroup()%>%
dplyr::arrange(datum,date,IndexTradingSymbol,TradingSymbol)
View(factorchange)
factorchange<-mydatalight%>%
dplyr::select(datum,
date,
IndexTradingSymbol,
TradingSymbol,
A,
Kt,
ffit,
qit,
ci,
pi0,
qi0,
Fit)%>%
dplyr::group_by(IndexTradingSymbol,
TradingSymbol,
A,
Kt,
ffit,
qit,
ci,
pi0,
qi0,
Fit)%>%
dplyr::summarize(datum=min(datum),
date=min(date))%>%
dplyr::ungroup()%>%
dplyr::arrange(IndexTradingSymbol,datum,date,TradingSymbol)
View(check)
View(factorchange)
str(factorchange)
library(magrittr) # for the %>% operator
library(ggplot2)
mydatalight<-readRDS(file="./_R/dax-history-retreated.rds")
factorchange<-mydatalight%>%
dplyr::select(datum,
date,
IndexTradingSymbol,
TradingSymbol,
A,
Kt,
ffit,
qit,
ci,
pi0,
qi0,
Fit)%>%
dplyr::group_by(IndexTradingSymbol,
TradingSymbol,
A,
Kt,
ffit,
qit,
ci,
pi0,
qi0,
Fit)%>%
dplyr::summarize(datum=min(datum),
date=min(date))%>%
dplyr::ungroup()%>%
dplyr::arrange(IndexTradingSymbol,datum,date,TradingSymbol)
calendar<-dplyr::select(mydatalight,date,datum)%>%
dplyr::unique()
calendar<-dplyr::select(mydatalight,date,datum)%>%unique()%>%dplyr::arrange(date,datum)%>%dplyr::mutate(n=row_number())
View(calendar)
factorchange<-mydatalight%>%
dplyr::select(datum,
date,
IndexTradingSymbol,
TradingSymbol,
A,
Kt,
ffit,
qit,
ci,
pi0,
qi0,
Fit)%>%
dplyr::group_by(IndexTradingSymbol,
TradingSymbol,
A,
Kt,
ffit,
qit,
ci,
pi0,
qi0,
Fit)%>%
dplyr::arrange(IndexTradingSymbol,
TradingSymbol,
date,
datum)%>%
dplyr::mutate(rank=dense_rank())%>%
dplyr::ungroup()%>%
dplyr::arrange(IndexTradingSymbol,datum,date,TradingSymbol)
factorchange<-mydatalight%>%
dplyr::select(datum,
date,
IndexTradingSymbol,
TradingSymbol,
A,
Kt,
ffit,
qit,
ci,
pi0,
qi0,
Fit)%>%
dplyr::group_by(IndexTradingSymbol,
TradingSymbol,
A,
Kt,
ffit,
qit,
ci,
pi0,
qi0,
Fit)%>%
dplyr::arrange(IndexTradingSymbol,
TradingSymbol,
date,
datum)%>%
dplyr::mutate(rank=dplyr::dense_rank())%>%
dplyr::ungroup()%>%
dplyr::arrange(IndexTradingSymbol,datum,date,TradingSymbol)
factorchange<-mydatalight%>%
dplyr::select(datum,
date,
IndexTradingSymbol,
TradingSymbol,
A,
Kt,
ffit,
qit,
ci,
pi0,
qi0,
Fit)%>%
dplyr::group_by(IndexTradingSymbol,
TradingSymbol,
A,
Kt,
ffit,
qit,
ci,
pi0,
qi0,
Fit)%>%
dplyr::arrange(IndexTradingSymbol,
TradingSymbol,
date,
datum)%>%
dplyr::mutate(rank=dplyr::dense_rank(Fit,A))%>%
dplyr::ungroup()
factorchange<-mydatalight%>%
dplyr::select(datum,
date,
IndexTradingSymbol,
TradingSymbol,
A,
Kt,
ffit,
qit,
ci,
pi0,
qi0,
Fit)%>%
dplyr::group_by(IndexTradingSymbol,
TradingSymbol,
A,
Kt,
ffit,
qit,
ci,
pi0,
qi0,
Fit)%>%
dplyr::mutate(rank=dplyr::dense_rank(Fit,A,order_by(IndexTradingSymbol,
TradingSymbol,
date,
datum)))
factorchange<-mydatalight%>%
dplyr::select(datum,
date,
IndexTradingSymbol,
TradingSymbol,
A,
Kt,
ffit,
qit,
ci,
pi0,
qi0,
Fit)%>%
dplyr::group_by(IndexTradingSymbol,
TradingSymbol,
A,
Kt,
ffit,
qit,
ci,
pi0,
qi0,
Fit)%>%
dplyr::mutate(rank=dplyr::dense_rank(c("Fit","A"),
order_by(IndexTradingSymbol,
TradingSymbol,
date,
datum)))
install.packages("multidplyr")
devtools::install_github("hadley/multidplyr")
mydatalight<-readRDS(file="./_R/dax-history-retreated.rds")
View(group_by(mydatalight,TradingSymbol,ISIN)%>%summarize(count=n()))
library(magrittr) # for the %>% operator
library(ggplot2)
library(dplyr)
View(group_by(mydatalight,TradingSymbol,ISIN)%>%summarize(count=n()))
View(group_by(mydatalight,TradingSymbol,ISIN)%>%summarize(count=n(),
maxdate=max(date),
mindate=min(date)))
View(group_by(mydatalight,TradingSymbol,ISIN,Instrument)%>%summarize(count=n(),
maxdate=max(date),
mindate=min(date)))
View(group_by(mydatalight,TradingSymbol,ISIN,Instrument)%>%summarize(count=n(),
maxdate=max(date),
mindate=min(date))%>%
arrange(desc(maxdate))%>%
transmute(denserank=dense_rank())
)
View(group_by(mydatalight,TradingSymbol,ISIN,Instrument)%>%summarize(count=n(),
maxdate=max(date),
mindate=min(date))%>%
arrange(desc(maxdate))%>%
transmute(denserank=dense_rank(-maxdate))
)
View(group_by(mydatalight,TradingSymbol,ISIN,Instrument)%>%summarize(count=n(),
maxdate=max(date),
mindate=min(date))%>%
arrange(desc(maxdate))%>%
transmute(denserank=dense_rank(Instrument))
)
View(group_by(mydatalight,TradingSymbol,ISIN,Instrument)%>%summarize(count=n(),
maxdate=max(date),
mindate=min(date))%>%
arrange(desc(maxdate))%>%
transmute(denserank=dense_rank(Instrument))
)
View(group_by(mydatalight,TradingSymbol,ISIN,Instrument)%>%summarize(count=n(),
maxdate=max(date),
mindate=min(date))%>%
arrange(desc(maxdate))%>%
mutate(denserank=dense_rank(Instrument))
)
View(group_by(mydatalight,TradingSymbol,ISIN,Instrument)%>%summarize(count=n(),
maxdate=max(date),
mindate=min(date))%>%
#arrange(desc(maxdate))%>%
mutate(denserank=dense_rank(Instrument))
)
View(group_by(mydatalight,TradingSymbol,ISIN,Instrument)%>%summarize(count=n(),
maxdate=max(date),
mindate=min(date))%>%
#arrange(desc(maxdate))%>%
mutate(denserank=dense_rank(Instrument))
)
View(group_by(mydatalight,TradingSymbol,ISIN,Instrument)%>%summarize(count=n(),
maxdate=max(date),
mindate=min(date))%>%
mutate(denserank=dense_rank(Instrument))%>%
arrange(desc(maxdate))
)
View(group_by(mydatalight,TradingSymbol,ISIN,Instrument)%>%summarize(count=n(),
maxdate=max(date),
mindate=min(date))%>%
mutate(denserank=dense_rank(Instrument))%>%
arrange(Instrument)
)
View(group_by(mydatalight,TradingSymbol,ISIN,Instrument)%>%summarize(count=n(),
maxdate=max(date),
mindate=min(date))%>%
mutate(denserank=dense_rank(Instrument))%>%
arrange(TradingSymbol,desc(maxdate))
)
up_by(mydatalight,TradingSymbol,ISIN,Instrument)%>%summarize(count=n(),
maxdate=max(date),
mindate=min(date))%>%
arrange(TradingSymbol,desc(maxdate))%>%
mutate(denserank=dense_rank(Instrument),
rank=rank(TradingSymbol))
)
View(group_by(mydatalight,TradingSymbol,ISIN,Instrument)%>%summarize(count=n(),
maxdate=max(date),
mindate=min(date))%>%
arrange(TradingSymbol,desc(maxdate))%>%
mutate(denserank=dense_rank(Instrument),
rank=rank(TradingSymbol))
)
View(group_by(mydatalight,TradingSymbol,ISIN,Instrument)%>%summarize(count=n(),
maxdate=max(date),
mindate=min(date))%>%
arrange(TradingSymbol,desc(maxdate))%>%
mutate(denserank=dense_rank(Instrument),
rank=min_rank(TradingSymbol))
)
View(group_by(mydatalight,TradingSymbol,ISIN,Instrument)%>%summarize(count=n(),
maxdate=max(date),
mindate=min(date))%>%
arrange(Instrument)
)
unique(mydatalight[mydatalight$datum=="20160930",c("TradingSymbol")])
unique(mydatalight[mydatalight$datum=="20160930",c("TradingSymbol"),drop=FALSE])
View(group_by(mydatalight,TradingSymbol,ISIN,Instrument)%>%summarize(count=n(),
maxdate=max(date),
mindate=min(date))%>%
arrange(Instrument)%>%
merge(.,unique(mydatalight[mydatalight$datum=="20160930",c("TradingSymbol"),drop=FALSE]),all=TRUE)
)
View(group_by(mydatalight,TradingSymbol,ISIN,Instrument)%>%summarize(count=n(),
maxdate=max(date),
mindate=min(date))%>%
arrange(Instrument)%>%
merge(.,
dataunique(mydatalight[mydatalight$datum=="20160930",c("TradingSymbol"),drop=FALSE]),
all.x=TRUE,
all.y=FALSE)
)
View(group_by(mydatalight,TradingSymbol,ISIN,Instrument)%>%summarize(count=n(),
maxdate=max(date),
mindate=min(date))%>%
arrange(Instrument)%>%
merge(.,
unique(mydatalight[mydatalight$datum=="20160930",c("TradingSymbol"),drop=FALSE]),
all.x=TRUE,
all.y=FALSE)
)
toto<-cbind(unique(mydatalight[mydatalight$datum=="20160930",c("TradingSymbol"),drop=FALSE]),
Exist=1)
View(group_by(mydatalight,TradingSymbol,ISIN,Instrument)%>%summarize(count=n(),
maxdate=max(date),
mindate=min(date))%>%
arrange(Instrument)%>%
merge(.,
toto,
all=TRUE,
)
)
View(group_by(mydatalight,TradingSymbol,ISIN,Instrument)%>%summarize(count=n(),
maxdate=max(date),
mindate=min(date))%>%
merge(.,
toto,
all=TRUE)%>%
arrange(Instrument)
)
ptf20160930<-cbind(unique(mydatalight[mydatalight$datum=="20160930",c("TradingSymbol"),drop=FALSE]),
Exist20160930=1)
keyhistory<-group_by(mydatalight,TradingSymbol,ISIN,Instrument)%>%summarize(count=n(),
maxdate=max(date),
mindate=min(date))%>%
merge(.,
ptf20160930,
all=TRUE)%>%
arrange(Instrument)
write.csv2(keyhistory,file="./_R/keyhistory.csv",sep=";")
write.csv2(x=keyhistory,file="./_R/keyhistory.csv",sep=";")
write.csv(x=keyhistory,file="./_R/keyhistory.csv",sep=";")
write.csv2(x=keyhistory,file="./_R/keyhistory.csv")
keyhistory.bearb<-read.csv2("./_R/prying-the-dax/keyhistory-bearbeitet.csv")
View(keyhistory.bearb)
keyhistory.bearb<-read.csv2("./_R/prying-the-dax/keyhistory-bearbeitet.csv")
keyhistory.bearb<-read.csv2("./_R/prying-the-dax/keyhistory-bearbeitet.csv",sep=",")
View(keyhistory.bearb)
colnames(keyhistory.bear)
colnames(keyhistory.bearb)
mydatalight.consistent<-dplyr::select(keyhistory.bearb,ISIN,TradingSymbolMap,ISINmap,InstrumentMap)%>%
merge(mydatalight,.,
all.x=TRUE,all.y=TRUE)
View(mydatalight.consistent)
group_by(mydatalight.consistent,TradingSymbolMap,ISINmap,InstrumentMap)%>%
summarize(count=n(),
maxdate=max(date),
mindate=min(date))
View(
group_by(mydatalight.consistent,TradingSymbolMap,ISINmap,InstrumentMap)%>%
summarize(count=n(),
maxdate=max(date),
mindate=min(date))
)
View(
group_by(mydatalight.consistent,TradingSymbolMap,ISINmap,InstrumentMap)%>%
summarize(count=n(),
maxdate=max(date),
mindate=min(date))%>%
filter(count<3048)
)
View(
group_by(mydatalight.consistent,TradingSymbolMap,ISINmap,InstrumentMap)%>%
summarize(count=n(),
maxdate=max(date),
mindate=min(date))%>%
filter(count<3048)%>%
arrange(mindate)
)
View(
group_by(mydatalight.consistent,TradingSymbolMap,ISINmap,InstrumentMap)%>%
summarize(count=n(),
maxdate=max(date),
mindate=min(date))%>%
filter(count<3048&count>2)%>%
arrange(mindate)
)
check.anz<-group_by(mydatalight,date)%>%summarize(count=n())
View(check.anz)
check.anz<-group_by(mydatalight,date)%>%summarize(count=n())
View(check.anz)
View(filter(check.anz,count<60))
check.price<-mydatalight.consistent%>%
group_by(TradingSymbolMap,ISINmap,InstrumentMap)%>%
mutate(pit.lag=lag(pit),
rt=pit/pit.lag-1)
check.price<-mydatalight.consistent%>%
group_by(TradingSymbolMap,ISINmap,InstrumentMap)%>%
mutate(pit.lag=lag(pit),
rt=pit/pit.lag-1)
check.price<-mydatalight.consistent%>%
group_by(TradingSymbolMap,ISINmap,InstrumentMap)%>%
transmute(pit.lag=lag(pit),
rt=pit/pit.lag-1)
check.price<-mydatalight.consistent%>%
group_by(TradingSymbolMap,ISINmap,InstrumentMap)%>%
transmute(pit.lag=lag(pit),
rt=pit/pit.lag-1)
View(check.price)
check.price<-mydatalight.consistent%>%
group_by(TradingSymbolMap,ISINmap,InstrumentMap)%>%
transmute(date,
datum,
pit.lag=lag(pit),
rt=pit/pit.lag-1)
View(check.price)
check.price<-mydatalight.consistent%>%
group_by(IndexTradingSymbol,TradingSymbolMap,ISINmap,InstrumentMap)%>%
transmute(date,
datum,
pit.lag=lag(pit),
rt=pit/pit.lag-1)
View(check.price)
check.price<-mydatalight.consistent%>%
group_by(IndexTradingSymbol,TradingSymbolMap,ISINmap,InstrumentMap)%>%
transmute(date,
datum,
pit.lag=lag(pit),
rt=pit/pit.lag-1)%>%
arrange(IndexTradingSymbol,TradingSymbolMap,ISINmap,InstrumentMap,date)
View(check.price)
check.price<-mydatalight.consistent%>%
group_by(IndexTradingSymbol,TradingSymbolMap,ISINmap,InstrumentMap)%>%
transmute(date,
datum,
pit,
pit.lag=lag(pit),
rt=pit/pit.lag-1)%>%
arrange(IndexTradingSymbol,TradingSymbolMap,ISINmap,InstrumentMap,date)
View(check.price)
check.price<-mydatalight.consistent%>%
group_by(IndexTradingSymbol,TradingSymbolMap,ISINmap,InstrumentMap)%>%
arrange(IndexTradingSymbol,TradingSymbolMap,ISINmap,InstrumentMap,date)%>%
transmute(date,
datum,
pit,
pit.lag=lag(pit),
rt=pit/pit.lag-1)%>%
arrange(IndexTradingSymbol,TradingSymbolMap,ISINmap,InstrumentMap,date)
View(check.price)
View(filter(checkprice,abs(rt)>0.1))
checkprice<-mydatalight.consistent%>%
group_by(IndexTradingSymbol,TradingSymbolMap,ISINmap,InstrumentMap)%>%
arrange(IndexTradingSymbol,TradingSymbolMap,ISINmap,InstrumentMap,date)%>%
transmute(date,
datum,
pit,
pit.lag=lag(pit),
rt=pit/pit.lag-1)%>%
arrange(IndexTradingSymbol,TradingSymbolMap,ISINmap,InstrumentMap,date)
View(filter(checkprice,abs(rt)>0.1))
View(filter(checkprice,abs(rt)>1))
View(filter(checkprice,ISINmap=="DE000CBK1001"))
